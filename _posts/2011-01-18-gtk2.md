---
layout:     post
title:      "Gtk+/Glade编程（二）"  
subtitle:   "入门"
date:       2011-01-18 16:08:00 +08:00
author:     "Sun Jianjiao <jianjiaosun@163.com>"
header-img: "img/bg/railway-station-1363771_1280.jpg"
catalog: true
tags:
    - gtk
    - glade
    - 编程
    - 图形化编程

---

本文将http://zetcode.com/tutorials/gtktutorial/中“Firs tporgrams”一章中内容采用Glade进行界面设计的方法完成“First porgrams”的例子，并且增加一些解释说明。 由于“Simple example”已经在《Gtk+/Glade编程（一）》中实现，这里就不再进行实现。

# 将窗口放置在屏幕中间
主要是窗口属性的设置，在右下角处的“属性”里面进行设置：
![Window Center](/img/post/gtk/2-center.png)

　　这样可以从右下角看到窗口对象的名称被设为：“Center”, 窗口的标题被设为“Center”, 长度为：230， 高度：150。保存并且命名为"center.glade"。

代码为：

```c
#include <gtk/gtk.h>

int main(int argc, char *argv[])
{
    GtkBuilder *builder;
    GtkWidget *window;

    gtk_init(&argc, &argv);

    builder = gtk_builder_new();
    gtk_builder_add_from_file(builder, "center.glade", NULL);
    window = GTK_WIDGET(gtk_builder_get_object(builder, "center"));

    //用于关闭窗口，也可以在属性的信号中进行设置
    g_signal_connect(GTK_WINDOW(window), "destroy", G_CALLBACK(gtk_main_quit), NULL);
    gtk_widget_show(window);

    g_object_unref(builder);

    gtk_main();

    return 0;
}
```

编译：  
```
    $gcc -o center center.c `pkg-config --cflags --libs gtk+-2.0`
```
执行：  
```
    $./center
```
![Window center show](/img/post/gtk/2-center-show.png)

点击关闭按钮可以正常关闭。

如果不使用Glade进行界面设计及生成，生成窗口并且设置属性的代码为：

```c
#include <gtk/gtk.h>

int main(int argc, char *argv[])
{
    GtkWidget *window;

    gtk_init(&argc, &argv);

    window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
    gtk_window_set_title(GTK_WINDOW(window), "center"); //title is "window"
    gtk_window_set_default_size(GTK_WINDOW(window), 230, 150);
    gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);

    gtk_widget_show(window);

    gtk_main();    

    return 0;
}
```

对比可知：  
创建一个组件，
使用Gtk+
* 需要new一个组件
* 通过set进行属性设置
使用Glade/Gtk+
* 需要在点击生成窗口，
* 通过属性设置栏进行属性设置
 利用GtkBuilder将生成的xml文件加入进来即可
　　虽然感觉Glade/Gtk+的步骤更多，但是并没有直接使用Gtk+繁琐，尤其是Glade可以设计所见即所得的界面，使得编码更加方便，更加高效！

# 应用程序的图标
只需“常规”的设置中，找到“图标”，选择需要设置为图标的图片即可，如下图：
![Logo](/img/post/gtk/2-logo-set.png)


